<!DOCTYPE html> 
<html> 
<head> <title>Forehead Idiot
Multi Agent Systems</title> 
<meta charset="UTF-8" /> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)" /> 
<link rel="stylesheet" type="text/css" href="foreheadidiot.css" /> 
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "AMSmath.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    },
    TeX: { equationNumbers: {autoNumber: "AMS" } },
    "HTML-CSS": { availableFonts: ["Latin-Modern"], webFont: "Latin-Modern" }
  });
</script>

<script type="text/javascript" 
src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" 
></script> 
<style type="text/css"> 
.MathJax_MathML {text-indent: 0;} 
</style> 
</head><body 
>
   <div class="maketitle">
                                                                                 
                                                                                 
                                                                                 
                                                                                 

<h2 class="titleHead">Forehead Idiot<br />
Multi Agent Systems</h2>
<div class="author" ><span 
class="ecrm-1200">Jos van de Wolfshaar (s2098407)</span>
<br />         <span 
class="ecrm-1200">Siebert Looije</span>
<br />       <span 
class="ecrm-1200">Diederik Greveling</span></div><br />
<div class="date" ><span 
class="ecrm-1200">March 21, 2016</span></div>
   </div>
   <h3 class="sectionHead"><span class="titlemark">1   </span> <a 
 id="x1-10001"></a>General Kripke structure</h3>
<!--l. 57--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">1.1   </span> <a 
 id="x1-20001.1"></a>Kripke model</h4>
<!--l. 58--><p class="noindent" >For modeling Forehead idiot we consider the structures $M =\langle S,\pi,R\rangle $.
We consider the games for 3 players. The states are given by $\boldsymbol s = (s_1,s_2,\ldots,s_m) \in S$, where $s_i \in D = \{ 2,3,4,5,6,7,8,9,10,j,q,k,a \}$. This means that if $s_3 = 5$, then player 3 has 5 on
his forehead. Note that $D$ is an ordered set: $2\lt 3\lt 4\lt 5\lt 6\lt 7\lt 8\lt 9\lt 10\lt j\lt q\lt k\lt a$.
</p><!--l. 61--><p class="indent" >   Since any player can only see those cards that are on the forehead of the other players, the relations are defined as $\boldsymbol s R_i \boldsymbol t$ such that $s_j = t_j,~\forall j \neq i$. A player's card is unique: $s_1 \neq s_2 \neq \cdots \neq s_m$. Note that relations are symmetric and reflexive.
</p><!--l. 63--><p class="indent" >  Suppose we take a subset of the total deck $D'\subseteq D$ with $|D'|=n$. There are $n!$ different sequences of cards. If the number of players is $m\leq n$, then for each possible set of cards there will be $(n-m)!$ games with the same sequence of cards for the first $m$ cards. Hence, the total number of possible games $g$ is:
\begin{equation}
 g=\frac{n!}{(n-m)!}
\end{equation}
 </p>
<!--l. 68--><p class="indent" >   The propositions in our model will be given by $\boldsymbol P = \{ p_ic_2,p_ic_3,\ldots,p_ic_a,w_i,l_i\}_{i=1}^m$. For example, $p_2 c_7$ means that player 2 holds card 7. The proposition $w_i$ means that player $i$ wins the game, whereas $l_i$ means that player $i$ loses the game.
</p><!--l. 70--><p class="indent" >   The valuation will be as follows: </p>
     <ul class="itemize1">
     <li class="itemize">We have that $\pi(\boldsymbol s)(p_ic_j) = \mathbb{t}$ iff $s_i = j$, so $\pi(\boldsymbol s)(p_ic_j) = \mathbb{f}$ iff $s_i \neq j$.
     </li>
     <li class="itemize">Furthermore, we have $\pi(\boldsymbol s)(w_i) = \mathbb{t}$ and $\pi(\boldsymbol s)(l_i) = \mathbb{f}$ iff $s_i \gt s_j$ for all $j \neq i$. In other words, $\pi(\boldsymbol s)(w_i)=\mathbb{f}$ and $\pi(\boldsymbol s)(l_i) = \mathbb{t}$ if for some $j\neq i$ we have that $s_i \lt s_j$.</li></ul>
<!--l. 76--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">1.2   </span> <a 
 id="x1-30001.2"></a>Theory</h4>
<!--l. 77--><p class="noindent" >Before the cards are put on the foreheads, every player knows that every player has exactly one card. This can be captured by
\begin{align*}
 K_i \bigwedge_{j=1}^m \bigg((p_j c_2 \wedge \neg p_j c_3 \wedge \cdots \wedge \neg p_j c_a) \vee (\neg p_j c_2 \wedge p_j c_3 \wedge \cdots \wedge \neg p_j c_a) \vee \cdots \vee (\neg p_j c_2 \wedge \neg p_j c_3 \wedge \cdots \wedge p_j c_a) \bigg)
\end{align*}
</p>
<!--l. 82--><p class="noindent" >The moment that the players put the cards on their foreheads it is as if $m$ announcements are made. Every player announces that he knows what the other players' cards are (without actually saying it). This means that every player also knows his remaining possibilities.
</p><!--l. 84--><p class="indent" >   In the most general case, we could express this as follows:
\begin{align*}
 M \models \left[ \bigwedge_{i=1}^m K_i \left(\bigwedge_{j\neq i} p_j c_{u^{(j)}} \right) \right] \bigwedge_{i=1}^m \left( K_i \bigvee_{u^{(i)} \notin \{ u^{(j)} \}_{j\neq i}} p_i c_{u^{(i)}} \right)
\end{align*}
where $u^{(j)} \in D'$ is the card that player $j$ is holding. This greatly reduces the number of possible worlds. In fact, if there are $n$ cards and $m$ players, we have that each player has $n-m+1$ alternative worlds. Hence there are $m(n-m+1) - m +1$ possible worlds left. 
</p><!--l. 91--><p class="noindent" >
</p>
   <h3 class="sectionHead"><span class="titlemark">2   </span> <a 
 id="x1-40002"></a>Game analysis</h3>
<!--l. 92--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">2.1   </span> <a 
 id="x1-50002.1"></a><!--l. 92--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>n</mi></math> cards
game with <!--l. 92--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi> <mo 
class="MathClass-rel">=</mo> <mi 
>n</mi></math>
players</h4>
<!--l. 93--><p class="noindent" >In the scenario of $n$ cards with $m=n$ players there will be $\displaystyle g = \frac{n!}{(n-m)!} = n!$ possible games. Once the cards are dealt, each player is able to see the other players' cards. Because of the fact that $m=n$ and the fact that all cards are unique, for any pair of states $\boldsymbol s, \boldsymbol t$ such that $\boldsymbol s \neq \boldsymbol t$, we have that at least two cards are changed: $s_i \neq t_i$ and $s_j \neq t_j$ for $i,j\leq m$ and $i\neq j$.
</p><!--l. 95--><p class="indent" >   This implies that there are only reflexive relations: $\boldsymbol s R_i \boldsymbol s$, since for any other $\boldsymbol t \neq \boldsymbol s$, we require that all cards but one are the same. For any state $\boldsymbol s$ this relation is only satisfied by $\boldsymbol s$ itself.
</p><!--l. 97--><p class="indent" >   Therefore, once a player sees the other players&#x2019; cards, he will know his own card, since there is only
one state to go to. Hence, each player knows whether he wins or loses. Therefore, from a game theoretic
point of view, this scenario is not particularly interesting.
</p><!--l. 99--><p class="indent" >   TODO: maybe formalize this more...
</p><!--l. 101--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">2.2   </span> <a 
 id="x1-60002.2"></a><!--l. 101--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>n</mi></math>
cards with <!--l. 101--><math 
 xmlns="http://www.w3.org/1998/Math/MathML"  
display="inline" ><mi 
>m</mi> <mo 
class="MathClass-rel">&#x003C;</mo> <mi 
>n</mi></math>
players</h4>
<!--l. 102--><p class="noindent" >A more difficult scenario arises when there are $n$ cards and $m < n$ players. In this case there are relations $\boldsymbol s R_i \boldsymbol t$ for those pairs of $\boldsymbol s$ and $\boldsymbol t$ such that $s_j = t_j$ for all $j\neq i$.
</p><!--l. 104--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">2.2.1   </span> <a 
 id="x1-70002.2.1"></a>The probability of winning the game</h5>
<!--l. 106--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-80002.2.1"></a><span 
class="ecbx-1000">Estimating one&#x2019;s own odds</span></span>
   Since there are $n-m$ cards that have not been dealt, each player has $n-m+1$ possibilities for his own card and, consequently, $n-m+1$ possible outcomes of the game. To determine the probability for a player to win, let $T_i \subseteq S$ be the subset of possible states such that $\boldsymbol s R_i \boldsymbol t$. Note that $|T_i| = n-m+1$. Now let $T^{(w_i)}_i \subseteq T_i$ be a subset of states such that for $\boldsymbol t \in T^{(w_i)}_i$ we have that $(M,\boldsymbol t) \models w_i$. The probability that player $i$ wins based on the information available is:
\begin{equation}
\mathscr{P}^{(w_i)}_i = \frac{|T^{(w_i)}_i|}{|T_i|} = \frac{\lvert T^{(w_i)}_i\rvert}{n-m+1}
\end{equation}
</p>
<!--l. 112--><p class="indent" >  The relations are symmetric. Hence, $\mathscr{P}^{(w_i)}_i$ will be the same for all states.
</p>
<!--l. 114--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-90002.2.1"></a><span 
class="ecbx-1000">Estimating another player&#x2019;s odds</span></span>
   Let $T^{(w_j)}_i \subseteq T_i$ be the subset of states such that for all states $\boldsymbol t \in T^{(w_j)}_i$ we have that $(M,\boldsymbol t) \models w_j$. Based on this information and perhaps not surprisingly, the probability for player $j$ to win this game from player $i$'s point of view will be given by:
\begin{equation}
\mathscr{P}^{(w_j)}_i = \frac{|T^{(w_j)}_i|}{|T_i|} = \frac{\lvert T^{(w_j)}_i\rvert}{n-m+1} \label{eq:prob}
\end{equation}
 </p>
<!--l. 121--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">2.2.2   </span> <a 
 id="x1-100002.2.2"></a>Playing strategies</h5>
<!--l. 122--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-110002.2.2"></a><span 
class="ecbx-1000">Calling a bet</span></span>
   Before we get to the optimal strategy, let us define the utility. If $\mathscr G^{(k)}_i$ denotes the `gain' of winning the game at round $k$, the utility will be given by:
\begin{equation}
 U^{(w_i)}_i = \mathscr{G}^{(k)}_i \mathscr{P}^{(w_i)}_i
\label{eq:util}
 \end{equation}
Let $\mathscr{L}^{(k)}_i$ be the loss of folding or losing the game after calling round $k$. In other words, $\mathscr{L}^{(k)}_i$ denotes the amount of coins that the player $i$ will have to bet for playing until round $k$. Note that $\displaystyle \mathscr{G}^{(k)}_i = \sum_{j\neq i} \mathscr{L}^{(k)}_j$. 
</p><!--l. 130--><p class="indent" >   The utility of losing a game will be given by:
\begin{equation}
 U^{(l_i)}_i = -\mathscr L^{k}_i (1-\mathscr P^{(w_i)}_i)
 \label{eq:loss}
\end{equation}
</p>
<!--l. 136--><p class="indent" >   Now we can define a player's strategy for calling any bet as follows. Let $C_i^{(k)} \in \{\mathbb t, \mathbb f\}$ denote the decision of player $i$ at round $k$, where $\mathbb t$ corresponds to calling the bet and $\mathbb f$ corresponds to folding. The decision will be given by:
\begin{equation}
C_i^{(k)}  =
\begin{cases}
 \mathbb t & \text{if } \gamma_i U^{(w_i)}_i + U^{(l_i)}_i \geq 0\\
 \mathbb f & \text{otherwise}
\end{cases}
\label{eq:strat}
\end{equation}
In equation \ref{eq:strat}, $\gamma_i$ will characterize the player's characteristic strategy. If $\gamma_i = 1$, the player has an optimal strategy. If $\gamma_i > 1$ the player exhibits a risky strategy. If $\gamma_i < 1$ the player exhibits a safe strategy.                                          
</p><!--l. 147--><p class="indent" >   We can also decide to make the gain $\mathscr G^{(k)}_i$ a bit more specific:
\begin{equation}
\mathscr G^{(k)}_i = \sum_{j=1}^{i-1} \mathscr L^{(k)}_j +  \sum_{j=i+1}^m \mathscr L^{(k-1)}_j +  \sum_{j=i+1}^m \{ C^{(k)}_j\} (\mathscr L^{(k)}_j - \mathscr L^{(k-1)}_j)
\label{eq:gain}
\end{equation}
where we have the bet of all players hat have already called the current bet, the bet of all players that still have to call the current bet and the bets that those players are going to place this round. In this equation $\{C^{(k)}_j\} = 1$ if $C^{(k)}_j=\mathbb{t}$ and $\{C^{(k)}_j\} = 0$ otherwise.
</p><!--l. 154--><p class="indent" >   It is interesting to see if we can let the players deduce the value of $\gamma_i$ for the other players. Until then, it seems reasonable to simplify equation (\ref{eq:gain}) to:
\begin{equation}
\mathscr{G}^{(k)}_i = \sum_{j\neq i} \mathscr L^{(k)}_j
\label{eq:sgain}
\end{equation}
</p>
<!--l. 160--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-120002.2.2"></a><span 
class="ecbx-1000">Raising the current bet: bluﬃng</span></span>
   A player can also decide to raise the current bet. The main reason for raising your bet is to make the other players decide to quit the game, or to increase the final gain. A player now bluffs if, after its bluffing bet, $\gamma_i U^{(w)}_i + U^{(l)}_i \lt 0$. 
</p><!--l. 163--><p class="indent" >   Based on the information that is available, a player can estimate the utilities of other players. Hence, it can make its own estimations of the other players' gains: $\langle \mathscr G^{(k)}_j \rangle_i$, which is the estimated gain for player $j$ from player $i$'s point of view.
</p><!--l. 165--><p class="indent" >   The estimations can be obtained by using equations (\ref{eq:util}) through (\ref{eq:sgain}), but now we will start with some estimated probability $\mathscr P^{w_j}_i$, from equation (\ref{eq:prob}).
</p><!--l. 167--><p class="indent" >   Once we have the estimated gains we can make an estimation of the other player's decisions. For bluffing we want to achieve that $C^{(k)}_j = \mathbb{f}$ for the players $j\neq i$. Hence, if a player decides to bluff, he should try to ensure that $\langle C^{(k)}_j \rangle_i = \mathbb{f}$ for those player's that have a higher probability of winning. Formally, it should make at least those players $j$ fold such that $\mathscr P^{(w_j)}_i \gt \mathscr P^{(w_i)}_i$. 
</p><!--l. 169--><p class="indent" >   As of now, we will not consider bluﬃng in full detail.
</p>
<!--l. 171--><p class="noindent" ><span class="paragraphHead"><a 
 id="x1-130002.2.2"></a><span 
class="ecbx-1000">Raising the current bet: increasing the gain</span></span>
   If a player is confident of winning the round, he can decide to raise the current bet. A player should try to accomplish that $C^{(k)}_j = \mathbb{t}$ while it should also maximize the expected gain. 
</p><!--l. 174--><p class="noindent" >
</p>
   <h4 class="subsectionHead"><span class="titlemark">2.3   </span> <a 
 id="x1-140002.3"></a>Reasoning about strategies</h4>
<!--l. 175--><p class="noindent" >We now want to address the agents&#x2019; reasoning during a game. We will start out small by simplifying the
rules of the game. We will only have a single betting round. Each player can choose to either call the
minimum bet of 1 coin, or fold. The player that is seated on the left side of the dealer has to put in a
blind bet of 1 coin. This is to encourage other players for participating (knowing that there is at least
something at stake).
</p><!--l. 177--><p class="indent" >   Let's extend our set of propositions to $\boldsymbol{P}'=\boldsymbol{P} \cup \{r_i,o_i,h_i\}_{i=1}^m$ in which $r_i$ will resemble a risky strategy for player $i$, $o_i$ will be used for optimal strategy and $h_i$ for safe or `harmless' strategy. A risky strategy will mean that $\gamma_i=1.1$, an optimal strategy will mean that $\gamma_i=1.0$ and a harmless strategy will resemble $\gamma_i=0.9$.
</p><!--l. 179--><p class="indent" >  Note that we have:
\begin{align*}
 M &\models K_i r_i \vee K_i o_i \vee K_i h_i\\
 M &\models K_i \bigwedge_{j=1}^m\bigg( (r_j \wedge \neg o_j \wedge \neg h_j ) \vee
					(\neg r_j \wedge o_j \wedge \neg h_j) \vee
					(\neg r_j \wedge \neg o_j \wedge h_j)\bigg)
\end{align*}
for $i=1,2,\ldots,m$.                                                                            
</p><!--l. 188--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">2.3.1   </span> <a 
 id="x1-150002.3.1"></a>First round</h5>
<!--l. 189--><p class="noindent" >First we can compute the loss for each player of participating. This is simply the amount of coins, so $\forall i,~\mathscr{L}^{(1)}_i=1$. Thus, we can simplify the utility for losing (equation \ref{eq:loss}):
\begin{equation}
U^{(l_i)}_i = -(1 - \mathscr{P}^{(w_i)}_i)
\end{equation} </p>
<!--l. 194--><p class="indent" >   At the first round, the players know nothing about each other's strategies (given by $\gamma_i$). Hence, they will play based solely on what they see by looking at the opponents' foreheads.
</p><!--l. 196--><p class="indent" >   There is no way to estimate the decisions of the other players yet. Hence, we will compute the gain simply by adding the losses of the other people (equation \ref{eq:sgain}). Note that this should be simply $m-1$.
</p><!--l. 198--><p class="indent" >   Once we have the gain, we can compute the utility of winning a game and so we can also obtain the decision for each player (equation \ref{eq:strat}).
</p><!--l. 200--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">2.3.2   </span> <a 
 id="x1-160002.3.2"></a>Ending the round</h5>
<!--l. 201--><p class="noindent" >At the end of a round, the players are allowed to see their own cards. Hence they now know on which
cards the decision of each opponent was based on. It is as if each player gets to know the utility of all
other players during the round that just ended.
</p><!--l. 203--><p class="indent" >   First, suppose that $C^{(k)}_i = \mathbb{t}$. Now any player $j\neq i$ knows that the threshold of 0 was exceeded. Hence each player $j$ knows 
\begin{align*}
\gamma_i U^{(w_i)}_i + U^{(l_i)}_i &\geq 0\\
\gamma_i &\geq -\frac{U^{(l_i)}_i }{U^{(w_i)}_i}\\
\end{align*}
So the lower bound of $\gamma_i$ from $j$'s perspective is increased.
</p><!--l. 210--><p class="indent" >   Second, suppose that $C^{(k)}_i = \mathbb{f}$. Now any player $j\neq i$ knows:
\begin{align*}
\gamma_i U^{(w_i)}_i + U^{(l_i)}_i &\lt 0\\
\gamma_i &\lt -\frac{U^{(l_i)}_i }{U^{(w_i)}_i}\\
\end{align*}
</p>
<!--l. 216--><p class="noindent" >In either case, we could consider it to be an announcement of the possibilities that are left. For example, if players $j\neq i$ find that $\gamma_i < 1.5$, it is as if it is announced that $r_i \vee o_i \vee h_i$. In other words, we might not gain any information. However, a series of rounds could enable agents $j$ to deduce $\gamma_i$. For example, let's say that three rounds are played, in which $\gamma_i < 1.5,\gamma_i \geq 0.93,\gamma_i < 1.06$. This sequence of announcements can be captured by:
\begin{equation*}
M\models [r_i \vee o_i \vee h_i][\neg h_i][\neg r_i] \bigwedge_{j=1}^m K_j o_i
\end{equation*}
</p>
<!--l. 221--><p class="noindent" >
</p>
   <h5 class="subsubsectionHead"><span class="titlemark">2.3.3   </span> <a 
 id="x1-170002.3.3"></a>Knowing another one&#x2019;s strategy</h5>
<!--l. 222--><p class="noindent" >Once a player knows another player's strategy, it can use this to estimate its own odds based on another player's decision. If player $i$ calls, then another player $j$ knows that 
\begin{align*}
\gamma_i U^{(w_i)}_i + U^{(l_i)}_i &\geq 0\\
\gamma_i &\geq -\frac{U^{(l_i)}_i }{U^{(w_i)}_i}\\
\end{align*}
</p>
<!--l. 228--><p class="noindent" >TODO: now that we have $\gamma_i$, how does it change the dynamics of the game?
</p>
    
</body> 
</html>
                                                                                 


